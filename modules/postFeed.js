import { dom } from "./dom.js";
import { firebase } from "./firebase.js";

document.body.append(renderFeed());

export function renderFeed() {
  const section = dom.create("section", "feed");

  firebase.GET().then((messages) => {
    console.log(messages);
    for (const id in messages) {
      section.append(createPost(messages[id]));
    }
  });

  return section;
}

function createPost(message) {
  const post = dom.create("article", "post");

  const mood = dom.createAndAppend(post, "div", "post-mood");
  mood.innerHTML = icons(message.mood);

  const author = dom.createAndAppend(post, "p", "post-author", message.author);

  const content = dom.createAndAppend(
    post,
    "p",
    "post-content",
    message.content
  );

  return post;
}

function icons(name) {
  switch (name) {
    case "sad":
      return `<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M14,24a.979.979,0,0,1-.394-.081,1,1,0,0,1-.525-1.313l3-7a1,1,0,1,1,1.838.788l-3,7A1,1,0,0,1,14,24Zm-4,0a.979.979,0,0,1-.394-.081,1,1,0,0,1-.525-1.313l3-7a1,1,0,0,1,1.838.788l-3,7A1,1,0,0,1,10,24ZM6,24a.979.979,0,0,1-.394-.081,1,1,0,0,1-.525-1.313l3-7a1,1,0,0,1,1.838.788l-3,7A1,1,0,0,1,6,24ZM4,19.744a.992.992,0,0,1-.333-.057A5.54,5.54,0,0,1,1.8,10.43a1,1,0,0,0,.345-.9,8.147,8.147,0,0,1-.033-2.889A7.945,7.945,0,0,1,8.5.138a8.051,8.051,0,0,1,8.734,4.438,1.039,1.039,0,0,0,.743.57c6.526,1.219,8.22,10.177,2.565,13.673a1,1,0,1,1-1.078-1.684c4.144-2.515,2.884-9.179-1.878-10.029a3.009,3.009,0,0,1-2.158-1.672A6,6,0,0,0,4.086,6.967a6.136,6.136,0,0,0,.024,2.18,3,3,0,0,1-.964,2.763A3.526,3.526,0,0,0,4.333,17.8,1,1,0,0,1,4,19.744Z"/></svg>`;
    case "turbulent":
      return `<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M0,12a1,1,0,0,1,1-1H7a1,1,0,0,1,0,2H1A1,1,0,0,1,0,12Zm20.886-.893A4.99,4.99,0,1,0,12,8a1,1,0,0,0,2,0,3,3,0,1,1,3,3H11a1,1,0,0,0,0,2h9a2,2,0,0,1,2,2c-.009,2.337-3.281,2.648-4.057.667a1,1,0,0,0-1.886.666C17.615,20.415,23.952,19.579,24,15A4,4,0,0,0,20.886,11.107ZM11,16H1a1,1,0,0,0,0,2H11a2,2,0,0,1,2,2c-.009,2.337-3.281,2.648-4.057.667a1,1,0,1,0-1.886.666C8.615,25.415,14.952,24.579,15,20A4,4,0,0,0,11,16ZM1,8H7a4,4,0,0,0,4-4C10.952-.581,4.613-1.414,3.057,2.667a1,1,0,0,0,1.886.666C5.72,1.351,8.991,1.663,9,4A2,2,0,0,1,7,6H1A1,1,0,0,0,1,8Z"/></svg>`;
    case "happy":
      return `<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M23,11H18.92a6.924,6.924,0,0,0-.429-1.607l3.527-2.044a1,1,0,1,0-1-1.731l-3.53,2.047a7.062,7.062,0,0,0-1.149-1.15l2.046-3.531a1,1,0,0,0-1.731-1L14.607,5.509A6.9,6.9,0,0,0,13,5.08V1a1,1,0,0,0-2,0V5.08a6.9,6.9,0,0,0-1.607.429L7.349,1.982a1,1,0,0,0-1.731,1L7.664,6.515a7.062,7.062,0,0,0-1.149,1.15L2.985,5.618a1,1,0,1,0-1,1.731L5.509,9.393A6.924,6.924,0,0,0,5.08,11H1a1,1,0,0,0,0,2H5.08a6.924,6.924,0,0,0,.429,1.607L1.982,16.651a1,1,0,1,0,1,1.731l3.53-2.047a7.062,7.062,0,0,0,1.149,1.15L5.618,21.016a1,1,0,0,0,1.731,1l2.044-3.527A6.947,6.947,0,0,0,11,18.92V23a1,1,0,0,0,2,0V18.92a6.947,6.947,0,0,0,1.607-.429l2.044,3.527a1,1,0,0,0,1.731-1l-2.046-3.531a7.062,7.062,0,0,0,1.149-1.15l3.53,2.047a1,1,0,1,0,1-1.731l-3.527-2.044A6.924,6.924,0,0,0,18.92,13H23A1,1,0,0,0,23,11ZM12,17c-6.608-.21-6.606-9.791,0-10C18.608,7.21,18.606,16.791,12,17Z"/></svg>`;
    case "mad":
      return `<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M10.892,24.015a1.913,1.913,0,0,1-.815-.186,1.844,1.844,0,0,1-1-2.207L9.614,20H7.923a1.933,1.933,0,0,1-1.84-2.479l2.132-6.174A2,2,0,0,1,10.1,10H12a2,2,0,0,1,1.867,2.717L13.413,14h1.681a1.905,1.905,0,0,1,1.587,2.958L12.419,23.2A1.848,1.848,0,0,1,10.892,24.015ZM11,18a1,1,0,0,1,.949,1.315l-.662,1.993,3.66-5.357L12,16a1,1,0,0,1-.943-1.333l.932-2.642L10.1,12,8.021,18.031Zm8,1.5a1,1,0,0,1-.385-1.923c4.967-2.007,4.218-9.468-1.032-10.472a3.011,3.011,0,0,1-2.158-1.672A6,6,0,0,0,4.086,6.967a6.159,6.159,0,0,0,.023,2.18,3,3,0,0,1-.962,2.762,3.523,3.523,0,0,0,.41,5.5,1,1,0,1,1-1.114,1.662A5.536,5.536,0,0,1,1.8,10.43a1,1,0,0,0,.345-.9,8.146,8.146,0,0,1-.033-2.889A7.946,7.946,0,0,1,8.5.137a8.057,8.057,0,0,1,8.734,4.44,1.04,1.04,0,0,0,.743.569c7.187,1.424,8.193,11.483,1.411,14.278A.987.987,0,0,1,19,19.5Z"/></svg>`;
  }
}
